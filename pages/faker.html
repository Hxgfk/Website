<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>what's it?</title>
    <style>
        button,video,body,html {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
        }

        #b {
            border: none;
            background: none;
            font-size: 50px;
        }
    </style>
    <script>
        let p = false;
        if (new URLSearchParams(location.search).get("play") === "true") {
            p = true;
        }
    </script>
</head>
<body>
<button id="b" onclick="r(this)">点击一下</button>
<video src="../openres/video/nevergonnagiveyouup.mp4" style="display: none" id="v" loop></video>
<script>
    const button = document.getElementById("b");
    const video = document.getElementById("v");

    function r() {
        button.style.display = "none";
        video.style.display = "block";
        setTimeout(function () {
            video.play();
        }, 500);
    }

    video.addEventListener("loadeddata", function () {
        if (p) {
            r();
        }
    });

    document.addEventListener("DOMContentLoaded", function () {
        let timeinv = setInterval(function () {
            if (p) {
                video.play()
                clearTimeout(timeinv)
            }else {
                clearTimeout(timeinv)
            }
        }, 1);
    });

    document.addEventListener("click", function () {
        let timeinv = setInterval(function () {
            if (p) {
                video.play()
                clearTimeout(timeinv)
            }else {
                clearTimeout(timeinv)
            }
        }, 1);
    });
</script>
</body>
</html>